<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Matrix TSL - PLC System Maintenance</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link rel="icon" type="image/x-icon" href="assets/icons/matrix-icon.ico">    <script src="worksheet-core.js"></script>
<script src="worksheet-tracking.js"></script>

</head>
<body>
  <!-- Navigation -->
  <nav class="main-navigation">
    <div class="nav-container">
      <div class="nav-logo">
        <img src="assets/matrix-logo.png" alt="Matrix Logo">
      </div>
      <ul class="nav-menu" id="nav-menu">
        <li class="nav-item">
          <a href="#" onclick="window.location='index.html'" class="nav-link">
            <i class="fas fa-home"></i> HOME
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='CP2388-worksheets.html'" class="nav-link active">
            <i class="fas fa-cogs"></i> CP2388
          </a>
        </li>
        <li class="nav-item">
          
        </li>
        
        <li class="nav-item">
          <a href="#" onclick="window.location='tracking-dashboard.html'" class="nav-link">
            <i class="fas fa-chart-line"></i> PROGRESS
          </a>
        </li>
        <li class="nav-item">
          <a href="#" onclick="window.location='about.html'" class="nav-link">
            <i class="fas fa-info-circle"></i> ABOUT
          </a>
        </li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="worksheet-box">
    <!-- Integrated Worksheet Header -->
    <div class="worksheet-header">
      <div class="worksheet-header-content">
        <div class="worksheet-header-left">
          <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-3.html'">
            <i class="fas fa-arrow-left"></i>
            <span>Previous Worksheet</span>
          </button>
        </div>
        <div class="worksheet-header-center">
          <h1 class="worksheet-title">Worksheet 4 - PLC System Maintenance</h1>
        </div>
        <div class="worksheet-header-right">
          <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-5.html'">
            <span>Next Worksheet</span>
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    </div>
    <!-- Introduction Section -->
    <div class="worksheet-section introduction-section">
      <h2 class="section-header"><i class="fas fa-info-circle"></i> 1. Introduction</h2>
      <div class="worksheet-content">
        <div class="introduction-content-wrapper">
          <div class="introduction-text">
            <p>This worksheet covers maintenance procedures for PLC system maintenance. The PLC is the central nervous system of modern industrial automation, making thousands of decisions per second.</p>
          </div>
          <div class="introduction-image">
            <div class="system-diagram">
              <img src="assets/maintenance/plc.png" alt="PLC System Maintenance">
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Over To You Section -->
    <div class="worksheet-section over-to-you-section">
      <h2 class="section-header"><i class="fas fa-hands-helping"></i> 2. Over To You</h2>
      <div class="worksheet-content">
        <p><strong>Examine the PLC and understand how its I/O status LEDs help with system diagnostics:</strong></p>
        
        <div class="steps-container">
          <div class="step-card" data-step="1">
            <div class="step-number">1</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Locate and Identify PLC I/O</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Locate the PLC in your training system. Identify the DI a/b (digital inputs) and DQ a/b (digital outputs) status LEDs on the PLC module.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="2">
            <div class="step-number">2</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Observe System Operation</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Run the system and observe the LED changes. Watch for the status LED flash on startup and the flow sensor input LED flashing during operation. Adjust flow by opening/closing the hand valve to see how sensor frequency changes.</p>
            </div>
          </div>
          
          <div class="step-card" data-step="3">
            <div class="step-number">3</div>
            <div class="step-content">
              <div class="step-header">
                <h4>Test Emergency Stop Channels</h4>
                <label class="step-checkbox">
                  <input type="checkbox" class="step-complete-checkbox">
                  <span class="checkmark"></span>
                </label>
              </div>
              <p>Observe DI a 0 and 1 (E-Stop channels) - they should be on during normal operation. Press the E-Stop to see them turn off, then reset and watch DI a 2 activate when pressing the blue reset button.</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- So What Section -->
    <div class="worksheet-section so-what-section">
      <h2 class="section-header"><i class="fas fa-lightbulb"></i> 3. So What?</h2>
      <div class="so-what-content">
        <p>The I/O status LEDs on the PLC provide invaluable real-time feedback for maintenance and troubleshooting:</p>
        
        <div class="key-point">
          <i class="fas fa-lightbulb"></i>
          <div>
            <strong>Quick Fault Diagnosis</strong>
            <p>If an expected input LED isn't lighting up, it may indicate a faulty sensor, wiring issue, or failed connection, enabling rapid troubleshooting.</p>
          </div>
        </div>
        
        <div class="key-point">
          <i class="fas fa-lightbulb"></i>
          <div>
            <strong>Verifying System Responses</strong>
            <p>Watching the LEDs change confirms that the PLC is correctly processing inputs and activating outputs in response to system conditions.</p>
          </div>
        </div>
        
        <div class="key-point">
          <i class="fas fa-lightbulb"></i>
          <div>
            <strong>Output Activation Check</strong>
            <p>The DQ LEDs confirm that outputs like solenoid valves and pumps are being triggered by the PLC. Missing LED activation may indicate unmet logic conditions.</p>
          </div>
        </div>
        
        <div class="key-point">
          <i class="fas fa-lightbulb"></i>
          <div>
            <strong>Safety System Verification</strong>
            <p>Emergency stop channels and reset functions can be verified through the input LEDs, ensuring safety systems are functioning correctly.</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Questions Section -->
    <div class="worksheet-section questions-section">
      <h2 class="section-header"><i class="fas fa-question-circle"></i> Questions & Answers</h2>
      <div class="questions-content">
        <div class="question-item" data-question="1">
          <h4>Question 1: What is a PLC and what is it designed for?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-1" value="A" class="option-radio">
              <span class="option-text">A) A Programmable Logic Controller (PLC) is an industrial computer designed for real-time control of machines and processes in harsh environments</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="B" class="option-radio">
              <span class="option-text">B) A Personal Logic Computer designed for office use</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="C" class="option-radio">
              <span class="option-text">C) A Portable Light Controller for lighting systems</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-1" value="D" class="option-radio">
              <span class="option-text">D) A Power Level Controller for electrical systems</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(1)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> C) A Portable Light Controller for lighting systems.
          </div>
        </div>
        
        <div class="question-item" data-question="2">
          <h4>Question 2: What do the status LEDs on the PLC indicate?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-2" value="A" class="option-radio">
              <span class="option-text">A) They show real-time feedback of input and output signals, helping verify if components are functioning correctly</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="B" class="option-radio">
              <span class="option-text">B) They show the temperature of the PLC</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="C" class="option-radio">
              <span class="option-text">C) They show the power consumption of the system</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-2" value="D" class="option-radio">
              <span class="option-text">D) They show the time of day</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(2)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> B) They show the temperature of the PLC.
          </div>
        </div>
        
        <div class="question-item" data-question="3">
          <h4>Question 3: What does it mean if an input LED expected to be on is not lit?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-3" value="A" class="option-radio">
              <span class="option-text">A) It could indicate a faulty sensor, wiring problem, or failed connection</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="B" class="option-radio">
              <span class="option-text">B) It means the PLC is working normally</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="C" class="option-radio">
              <span class="option-text">C) It means the system is in standby mode</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-3" value="D" class="option-radio">
              <span class="option-text">D) It means the LED is broken</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(3)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> D) It means the LED is broken.
          </div>
        </div>
        
        <div class="question-item" data-question="4">
          <h4>Question 4: What should you observe on the output LEDs when the system starts?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-4" value="A" class="option-radio">
              <span class="option-text">A) One of the output LEDs will flash briefly, this represents the system's status LED</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="B" class="option-radio">
              <span class="option-text">B) All output LEDs should turn off</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="C" class="option-radio">
              <span class="option-text">C) All output LEDs should stay on continuously</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-4" value="D" class="option-radio">
              <span class="option-text">D) The output LEDs should change color</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(4)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> A) One of the output LEDs will flash briefly, this represents the system's status LED.
          </div>
        </div>
        
        <div class="question-item" data-question="5">
          <h4>Question 5: How can you tell the flow sensor is working by looking at the PLC?</h4>
          <div class="multiple-choice-options">
            <label class="option-label">
              <input type="radio" name="question-5" value="A" class="option-radio">
              <span class="option-text">A) One of the input LEDs will flash rapidly; if flow is reduced, it slows down, and if flow increases, it nearly goes solid, showing the sensor is active</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="B" class="option-radio">
              <span class="option-text">B) The input LED should stay off completely</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="C" class="option-radio">
              <span class="option-text">C) The input LED should stay on continuously</span>
            </label>
            <label class="option-label">
              <input type="radio" name="question-5" value="D" class="option-radio">
              <span class="option-text">D) The input LED should change color</span>
            </label>
          </div>
          <div class="question-actions">
            <button class="submit-question-btn" onclick="submitAnswer(5)">Submit Answer</button>
          </div>
          <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
            <strong style="color: #4CAF50;">Correct Answer:</strong> B) The input LED should stay off completely.
          </div>
        </div>
      </div>
    </div>

    <!-- Diagnostic Challenge Section -->
    <div class="simulation-section">
      <h2 class="section-header"><i class="fas fa-search"></i> 3. System State Diagnostic Challenge</h2>
      <div class="worksheet-content">
        <p><strong>Analyze the following system states and identify what each condition represents. Use the PLC I/O display above to help you understand the system behavior.</strong></p>
        
        <div class="diagnostic-scenarios">
          <!-- Scenario 1 -->
          <div class="scenario-card" style="background: #2a2a2a; border-radius: 12px; padding: 25px; margin-bottom: 25px; border-left: 4px solid #FF9800;">
            <div class="scenario-header" style="margin-bottom: 20px;">
              <h3 style="color: #FF9800; margin: 0; font-size: 18px;">
                <i class="fas fa-exclamation-triangle"></i> Scenario 1
              </h3>
            </div>
            
            <!-- Scenario 1 I/O Display -->
            <div class="scenario-io-display" style="background: #1a1a1a; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
              <h4 style="color: #2196F3; margin-bottom: 15px; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-microchip"></i> PLC I/O Status - Scenario 1
              </h4>
              
              <div class="io-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Digital Inputs -->
                <div class="digital-inputs">
                  <h5 style="color: #4CAF50; margin-bottom: 12px; font-size: 14px;">
                    <i class="fas fa-sign-in-alt"></i> Digital Inputs
                  </h5>
                  <div style="display: grid; gap: 8px;">
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Estop Channel 1</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">E-Stop Ch1 [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_0</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Estop Channel 2</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">E-Stop Ch2 [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_1</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Reset Button</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">System Reset [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_2</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank High Float Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">High Level [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_3</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Low Float Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">Low Level [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_4</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Cover Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">Cover Position [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_5</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Analogue Values -->
                <div class="analogue-values">
                  <h5 style="color: #9C27B0; margin-bottom: 12px; font-size: 14px;">
                    <i class="fas fa-chart-line"></i> Analogue Values
                  </h5>
                  <div style="display: grid; gap: 8px;">
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Temperature</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">45°C</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Tank Temperature Sensor</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_0</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100°C</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 45%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Flow Rate</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">0l/h</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Flow Rate Measurement</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_1</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-500l/h</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 0%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Pump Demand</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">100%</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Pump Speed Demand</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_2</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100%</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 100%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Valve Demand</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">0%</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Valve Position Demand</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_3</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100%</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 0%;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="question-item" data-question="scenario-1">
              <h4>What does this system state indicate?</h4>
              <div class="multiple-choice-options">
                <label class="option-label">
                  <input type="radio" name="scenario-1" value="A" class="option-radio">
                  <span class="option-text">A) Pump is running at full speed but valve is closed, preventing flow - likely a control system issue</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-1" value="B" class="option-radio">
                  <span class="option-text">B) Normal operation - system is starting up</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-1" value="C" class="option-radio">
                  <span class="option-text">C) Emergency stop is activated</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-1" value="D" class="option-radio">
                  <span class="option-text">D) Low tank level causing pump cavitation</span>
                </label>
              </div>
              <div class="question-actions">
                <button class="submit-question-btn" onclick="submitScenarioAnswer('scenario-1')">Submit Answer</button>
              </div>
              <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
                <strong style="color: #4CAF50;">Correct Answer:</strong> A) Pump is running at full speed but valve is closed, preventing flow - likely a control system issue or valve malfunction.
              </div>
            </div>
          </div>

          <!-- Scenario 2 -->
          <div class="scenario-card" style="background: #2a2a2a; border-radius: 12px; padding: 25px; margin-bottom: 25px; border-left: 4px solid #F44336;">
            <div class="scenario-header" style="margin-bottom: 20px;">
              <h3 style="color: #F44336; margin: 0; font-size: 18px;">
                <i class="fas fa-times-circle"></i> Scenario 2
              </h3>
            </div>
            
            <!-- Scenario 2 I/O Display -->
            <div class="scenario-io-display" style="background: #1a1a1a; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
              <h4 style="color: #2196F3; margin-bottom: 15px; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-microchip"></i> PLC I/O Status - Scenario 2
              </h4>
              
              <div class="io-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Digital Inputs -->
                <div class="digital-inputs">
                  <h5 style="color: #4CAF50; margin-bottom: 12px; font-size: 14px;">
                    <i class="fas fa-sign-in-alt"></i> Digital Inputs
                  </h5>
                  <div style="display: grid; gap: 8px;">
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Estop Channel 1</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">E-Stop Ch1 [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_0</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Estop Channel 2</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">E-Stop Ch2 [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_1</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Reset Button</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">System Reset [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_2</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank High Float Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">High Level [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_3</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Low Float Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">Low Level [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_4</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Cover Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">Cover Position [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_5</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Analogue Values -->
                <div class="analogue-values">
                  <h5 style="color: #9C27B0; margin-bottom: 12px; font-size: 14px;">
                    <i class="fas fa-chart-line"></i> Analogue Values
                  </h5>
                  <div style="display: grid; gap: 8px;">
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Temperature</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">25°C</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Tank Temperature Sensor</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_0</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100°C</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 25%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Flow Rate</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">0l/h</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Flow Rate Measurement</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_1</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-500l/h</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 0%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Pump Demand</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">100%</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Pump Speed Demand</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_2</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100%</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 100%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Valve Demand</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">100%</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Valve Position Demand</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_3</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100%</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 100%;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="question-item" data-question="scenario-2">
              <h4>What does this system state indicate?</h4>
              <div class="multiple-choice-options">
                <label class="option-label">
                  <input type="radio" name="scenario-2" value="A" class="option-radio">
                  <span class="option-text">A) System is operating normally at low demand</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-2" value="B" class="option-radio">
                  <span class="option-text">B) Critical system fault - pump and valve fully active but no flow detected, likely pump failure or blockage</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-2" value="C" class="option-radio">
                  <span class="option-text">C) Valve is stuck closed</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-2" value="D" class="option-radio">
                  <span class="option-text">D) Flow sensor calibration error</span>
                </label>
              </div>
              <div class="question-actions">
                <button class="submit-question-btn" onclick="submitScenarioAnswer('scenario-2')">Submit Answer</button>
              </div>
              <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
                <strong style="color: #4CAF50;">Correct Answer:</strong> B) Critical system fault - pump and valve fully active but no flow detected, indicating pump failure, blockage, or empty tank.
              </div>
            </div>
          </div>

          <!-- Scenario 3 -->
          <div class="scenario-card" style="background: #2a2a2a; border-radius: 12px; padding: 25px; margin-bottom: 25px; border-left: 4px solid #9C27B0;">
            <div class="scenario-header" style="margin-bottom: 20px;">
              <h3 style="color: #9C27B0; margin: 0; font-size: 18px;">
                <i class="fas fa-water"></i> Scenario 3
              </h3>
            </div>
            
            <!-- Scenario 3 I/O Display -->
            <div class="scenario-io-display" style="background: #1a1a1a; border-radius: 12px; padding: 20px; margin-bottom: 20px;">
              <h4 style="color: #2196F3; margin-bottom: 15px; font-size: 16px; display: flex; align-items: center; gap: 8px;">
                <i class="fas fa-microchip"></i> PLC I/O Status - Scenario 3
              </h4>
              
              <div class="io-grid" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Digital Inputs -->
                <div class="digital-inputs">
                  <h5 style="color: #4CAF50; margin-bottom: 12px; font-size: 14px;">
                    <i class="fas fa-sign-in-alt"></i> Digital Inputs
                  </h5>
                  <div style="display: grid; gap: 8px;">
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Estop Channel 1</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">E-Stop Ch1 [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_0</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Estop Channel 2</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">E-Stop Ch2 [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_1</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">CLOSED</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Reset Button</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">System Reset [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_2</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank High Float Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">High Level [NC]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_3</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">OPEN</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #4CAF50;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Low Float Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #4CAF50; border: 2px solid #555; box-shadow: 0 0 6px rgba(76, 175, 80, 0.5);"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">Low Level [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_4</div>
                        <div style="color: #4CAF50; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">ACTIVE</div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #666;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Cover Switch</span>
                        <div style="width: 12px; height: 12px; border-radius: 50%; background: #333; border: 2px solid #555;"></div>
                      </div>
                      <div style="color: #AAA; font-size: 10px;">Cover Position [NO]</div>
                      <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div style="color: #888; font-size: 9px;">DI_5</div>
                        <div style="color: #666; font-size: 9px; font-weight: bold; background: #222; padding: 1px 4px; border-radius: 2px;">INACTIVE</div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Analogue Values -->
                <div class="analogue-values">
                  <h5 style="color: #9C27B0; margin-bottom: 12px; font-size: 14px;">
                    <i class="fas fa-chart-line"></i> Analogue Values
                  </h5>
                  <div style="display: grid; gap: 8px;">
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Tank Temperature</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">35°C</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Tank Temperature Sensor</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_0</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100°C</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 35%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Flow Rate</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">180l/h</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Flow Rate Measurement</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_1</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-500l/h</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 36%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Pump Demand</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">0%</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Pump Speed Demand</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_2</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100%</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 0%;"></div>
                      </div>
                    </div>
                    <div style="background: #333; padding: 12px; border-radius: 6px; border-left: 4px solid #9C27B0;">
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                        <span style="color: #FFFFFF; font-size: 12px; font-weight: bold;">Valve Demand</span>
                        <span style="color: #9C27B0; font-size: 14px; font-weight: bold; background: #222; padding: 3px 6px; border-radius: 3px;">75%</span>
                      </div>
                      <div style="color: #AAA; font-size: 10px; margin-bottom: 6px;">Valve Position Demand</div>
                      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px;">
                        <div style="color: #888; font-size: 9px;">AI_3</div>
                        <div style="color: #666; font-size: 8px;">Range: 0-100%</div>
                      </div>
                      <div style="background: #222; border-radius: 2px; overflow: hidden; height: 4px;">
                        <div style="background: linear-gradient(90deg, #9C27B0, #BA68C8); height: 100%; width: 75%;"></div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="question-item" data-question="scenario-3">
              <h4>What does this system state indicate?</h4>
              <div class="multiple-choice-options">
                <label class="option-label">
                  <input type="radio" name="scenario-3" value="A" class="option-radio">
                  <span class="option-text">A) Pump malfunction - not responding to control signals</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-3" value="B" class="option-radio">
                  <span class="option-text">B) Tank overfull condition - pump stopped, valve partially open for controlled drainage</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-3" value="C" class="option-radio">
                  <span class="option-text">C) System in energy-saving mode</span>
                </label>
                <label class="option-label">
                  <input type="radio" name="scenario-3" value="D" class="option-radio">
                  <span class="option-text">D) Normal low-demand operation</span>
                </label>
              </div>
              <div class="question-actions">
                <button class="submit-question-btn" onclick="submitScenarioAnswer('scenario-3')">Submit Answer</button>
              </div>
              <div class="correct-answer" style="display: none; margin-top: 15px; padding: 15px; background: #1a2f1a; border-radius: 4px; border-left: 3px solid #4CAF50;">
                <strong style="color: #4CAF50;">Correct Answer:</strong> B) Tank overfull condition - pump stopped due to high level float switch, valve partially open for controlled drainage.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



  <!-- Scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      loadSavedAnswers();
    });
    
        function submitAnswer(questionNumber) {
          const answerInput = document.querySelector(`[data-question="${questionNumber}"]`);
          if (!answerInput) return;
          
          const selectedOption = document.querySelector(`input[name="question-${questionNumber}"]:checked`);
          if (!selectedOption) {
            alert('Please select an answer before submitting.');
            return;
          }
          
          const answer = selectedOption.value;
          
          // Save with enhanced tracking
          worksheetTracker.saveAnswer(4, questionNumber, answer, 'maintenance');
          
          // Define correct answers for worksheet 4
          const correctAnswers = {
                "1": "C",
                "2": "B",
                "3": "D",
                "4": "A",
                "5": "B",
                "scenario-1": "A",
                "scenario-2": "B", 
                "scenario-3": "B"
          };
          
          // Apply visual feedback
          const allOptions = answerInput.querySelectorAll('.option-label');
          const correctAnswer = correctAnswers[questionNumber];
          
          allOptions.forEach(option => {
            const radio = option.querySelector('.option-radio');
            const optionValue = radio.value;
            
            if (optionValue === correctAnswer) {
              option.classList.add('correct');
            } else if (optionValue === answer && answer !== correctAnswer) {
              option.classList.add('incorrect');
            }
          });
          
          // Mark question as submitted to disable further interaction
          answerInput.classList.add('submitted');
          
          // Show feedback on button
          const submitBtn = answerInput.querySelector('.submit-question-btn');
          if (submitBtn) {
            const originalText = submitBtn.textContent;
            submitBtn.textContent = answer === correctAnswer ? 'Correct!' : 'Incorrect!';
            submitBtn.style.background = answer === correctAnswer ? '#4CAF50' : '#f44336';
            
            // Add incorrect class for enhanced styling
            if (answer !== correctAnswer) {
              submitBtn.classList.add('incorrect');
            }
            
            setTimeout(() => {
              submitBtn.textContent = originalText;
              submitBtn.style.background = '#4CAF50';
              submitBtn.classList.remove('incorrect');
            }, 2000);
          }
          
          // Show correct answer if available
          const correctAnswerDiv = answerInput.querySelector('.correct-answer');
          if (correctAnswerDiv) {
            correctAnswerDiv.style.display = 'block';
          }
        }

    // Scenario Challenge Functions
    let scenarioAnswers = {};
    
    // Define correct answers for scenarios
    const correctAnswers = {
      "scenario-1": "A",  // Pump deadhead condition
      "scenario-2": "B",  // Critical system fault
      "scenario-3": "B"   // Tank overfull condition
    };
    
    function submitScenarioAnswer(scenarioId) {
      const answerInput = document.querySelector(`[data-question="${scenarioId}"]`);
      if (!answerInput) return;
      
      const selectedOption = document.querySelector(`input[name="${scenarioId}"]:checked`);
      if (!selectedOption) {
        alert('Please select an answer before submitting.');
        return;
      }
      
      const answer = selectedOption.value;
      scenarioAnswers[scenarioId] = answer;
      
      // Save with enhanced tracking
      worksheetTracker.saveAnswer(4, scenarioId, answer, 'diagnostic');
      
      const correctAnswer = correctAnswers[scenarioId];
      
      // Apply visual feedback
      const allOptions = answerInput.querySelectorAll('.option-label');
      
      allOptions.forEach(option => {
        const radio = option.querySelector('.option-radio');
        const optionValue = radio.value;
        
        if (optionValue === correctAnswer) {
          option.classList.add('correct');
        } else if (optionValue === answer && answer !== correctAnswer) {
          option.classList.add('incorrect');
        }
      });
      
      // Mark question as submitted to disable further interaction
      answerInput.classList.add('submitted');
      
      // Show feedback on button
      const submitBtn = answerInput.querySelector('.submit-question-btn');
      if (submitBtn) {
        const originalText = submitBtn.textContent;
        submitBtn.textContent = answer === correctAnswer ? 'Correct!' : 'Incorrect!';
        submitBtn.style.background = answer === correctAnswer ? '#4CAF50' : '#f44336';
        
        if (answer !== correctAnswer) {
          submitBtn.classList.add('incorrect');
        }
        
        setTimeout(() => {
          submitBtn.textContent = originalText;
          submitBtn.style.background = '#4CAF50';
          submitBtn.classList.remove('incorrect');
        }, 2000);
      }
      
      // Show correct answer
      const correctAnswerDiv = answerInput.querySelector('.correct-answer');
      if (correctAnswerDiv) {
        correctAnswerDiv.style.display = 'block';
      }
    }
    
    function loadSavedAnswers() {
      // This function is now handled by the tracking system
    }
  </script>
  
  <!-- Bottom Navigation -->
  <div class="worksheet-bottom-nav">
    <div class="worksheet-header-content">
      <div class="worksheet-header-left">
        <button class="worksheet-nav-btn worksheet-back-btn" onclick="window.location.href='worksheet-3.html'">
          <i class="fas fa-arrow-left"></i>
          <span>Previous Worksheet</span>
        </button>
      </div>
      <div class="worksheet-header-center">
        <h1 class="worksheet-title">Worksheet 4 - PLC System Maintenance</h1>
      </div>
      <div class="worksheet-header-right">
        <button class="worksheet-nav-btn worksheet-next-btn" onclick="window.location.href='worksheet-5.html'">
          <span>Next Worksheet</span>
          <i class="fas fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>
  
</body>
</html> 